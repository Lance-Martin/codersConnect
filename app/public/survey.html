<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Coders Connect Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <style>
    body {
      background-color: #2c3e50;
      color: #95a5a6;
    }

    #title {
      text-align: center;
      font-size: 50px;
    }

    #surveybtn {
      width: 200px;
      height: 50px;
      margin-left: 32%;
      background-color: #95a5a6;
      color: #2c3e50;
      font-size: 20px;
    }

    #surveyBody {
      height: 500px;
      margin-top: 5%;
      background-color: #ecf0f1;
    }

    </style>
  </head>
  <body>
    <div class="modal fade bs-example-modal-lg" tabindex="-1" id = "myModal" role="dialog" aria-labelledby="myLargeModalLabel">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="row">
            <h1 style = "text-align:center;">Your match is in!</h1>
          </div>
          <div class = "row" id = "modalContent">
          </div>
        </div>
      </div>
    </div>

    <div id = "surveyBody" class="container col-md-10 col-md-offset-1">
      <h1 id = "title"><span class = "glyphicon glyphicon-console"></span> Enter Some Info</h1>
      <h2 id = "question"></h2>
      <div id = "inputArea">
        <form>
					<div class="form-group">
						<label for="">Name:</label>
						<input type="text" class="form-control" id="name">
					</div>

					<div class="form-group">
						<label for="">A link to a photo of yourself:</label>
						<input type="text" class="form-control" id="photo">
					</div>
					<button type="submit" class="btn btn-primary" id="startSurvey">Next</button>
				</form>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"   integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="   crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript">
      $(document).ready(function(){
        $('#startSurvey').on('click',function(){
          var name = $('#name').val().trim();
          var photo = $('#photo').val().trim();
          var scores = [];
          var questionCount = 0;
          var questionBank =["You believe in using tabs religiously","You think you'd have to be insane to not use jQuery over vanilla javascript for manipulating the dom","You'd rather do css from scratch than use a framework such as bootstrap","You'd rather spend your time plumbing in the back end than designing for the front end","Single quotes over double quotes", "Music is a necessity while working", "Even if it's 3:00 AM keep coding till it's done", "Silicon Valley over Game of Thrones", "Mac until you die", "Open source everything"];
          $('#inputArea').empty();
          $('#title').empty();
          $('#inputArea').html("<form onsubmit= 'return false'><div class = 'form-group'><label for =''>Rate on a scale of 0 to 5 whether you disagree or agree with the statement. 5 being you absolutely agree.</label><input type= 'number' class = 'form-control' id = 'userAnswer'></div><button type = 'submit' class = 'btn btn-primary' id = 'nextQuestion'>Next</button><form>");
          var symbol = '<span class = "glyphicon glyphicon-console"></span>';
          $('#title').html(symbol+" Question number " +(questionCount+1)+" of 10");
          $('#question').html(questionBank[0]);
          $('#nextQuestion').on('click',function(){
            console.log('works');
            if (questionCount < 9){
              questionCount++;
              var answer = $('#userAnswer').val().trim();
              $('#userAnswer').val('');
              scores.push(answer);
              $('#title').empty();
              $('#title').html(symbol+" Question number " +(questionCount+1)+" of 10");
              $('#question').html(questionBank[questionCount]);
              console.log(scores);
            }
            else {
              var newUser = {
                name: name,
                img: photo,
                score: scores,
              }
              console.log(newUser);
              var currentURL = window.location.origin;
              $.post(currentURL+'/api/friends/new',newUser, function(data){
                console.log(data);
                if (data == true){
                  console.log('data sent sucessfully');
                }
                else {
                  console.log('there was a problem sending the data');
                }
              });
              $('#myModal').modal('show')
            }
          });
          return false;
        })
      });
    </script>
  </body>
</html>
